{% extends "base.html" %}
{% block title %} HOME {% endblock %}

{% block container %}
<div class="flex mx-auto items-center justify-center shadow-lg mx-8 mb-4 max-w-lg">
    <ul class="list-group list-group-flush" id="notes">
        {% for note in notes %}

        <li class="list-group-item" onclick="goDoSomething(this)" data-id="{{note.id}}">
            <div  role="tooltip" class="z-20 mt-2 w-64 relative left-0 shadow-lg bg-pink-700 p-2 rounded">
                <svg class="absolute left-0 -ml-2 bottom-0 top-0 h-full" width="9px" height="16px" viewBox="0 0 9 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <g  stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <g transform="translate(-874.000000, -1029.000000)" fill="#BF125D">
                            <g  transform="translate(850.000000, 975.000000)">
                                <g  transform="translate(24.000000, 0.000000)">
                                    <polygon  transform="translate(4.500000, 62.000000) rotate(-90.000000) translate(-4.500000, -62.000000) " points="4.5 57.5 12.5 66.5 -3.5 66.5"></polygon>
                                </g>
                            </g>
                        </g>
                    </g>
                </svg>
                <p class="text-sm font-bold text-white pb-1">{{note.user_id}} {{note.id}}</p>
                <p class="text-xs leading-4 text-white pb-1">{{note.text}}</p>
            </div>
        </li>
        
        {% for comment in user.comments %}
         {% if comment.note_id == note.id %}
        <div role="tooltip" class="z-20 mt-2 w-64 relative left-0 ml-24 shadow-lg bg-indigo-700 p-2 rounded">
            <svg class="absolute rotate-180 right-0 -mr-2 bottom-0 top-0 h-full" width="9px" height="16px" viewBox="0 0 9 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <g  transform="translate(-874.000000, -1029.000000)" fill="#4c51bf">
                        <g  transform="translate(850.000000, 975.000000)">
                            <g  transform="translate(24.000000, 0.000000)">
                                <polygon transform="translate(4.500000, 62.000000) rotate(-90.000000) translate(-4.500000, -62.000000) " points="4.5 57.5 12.5 66.5 -3.5 66.5"></polygon>
                            </g>
                        </g>
                    </g>
                </g>
            </svg>
            <p class="text-sm font-bold text-white pb-1">{{comment.user_id}}</p>
            <p class="text-xs leading-4 text-white pb-1">{{comment.text}}</p>
        </div>
        
        
        {% endif %}
        {% endfor %}
    
        {% endfor %}
    </ul>
</div>


{% if user.is_authenticated %}



<div class="flex mx-auto items-center justify-center mx-8 mb-4 max-w-lg">
    <ul class="mx-auto grid max-w-full w-full grid-cols-2 gap-x-5 px-8">
      <li class="">
        <input class="peer sr-only" type="radio" value="yes" name="answer" id="yes" checked />
        <label class="flex justify-center cursor-pointer rounded-full border border-gray-300 bg-white py-2 px-4 hover:bg-gray-50 focus:outline-none peer-checked:border-transparent peer-checked:ring-2 peer-checked:ring-indigo-500 transition-all duration-500 ease-in-out" for="yes">Запись</label>
    
            <div class="absolute left-0 p-6 mt-2 rounded-lg w-[97vw] mx-auto transition-all duration-500 ease-in-out translate-x-40 opacity-0 invisible peer-checked:opacity-100 peer-checked:visible peer-checked:translate-x-1">
                <div class="flex mx-auto items-center justify-center shadow-lg mx-8 mb-4 max-w-lg">
                    <form method="POST" class="w-full max-w-xl bg-white rounded-lg px-4 pt-2">
                       <div class="flex flex-wrap -mx-3 mb-6">
                          <h2 class="px-4 pt-3 pb-2 text-gray-800 text-lg">Добавьте новый пост</h2>
                          <div class="w-full md:w-full px-3 mb-2 mt-2">
                             <textarea class="bg-gray-100 rounded border border-gray-400 leading-normal resize-none w-full h-20 py-2 px-3 font-medium placeholder-gray-700 focus:outline-none focus:bg-white" name="note" id="note" placeholder='Написать пост...' required></textarea>
                          </div>
                          <div class="w-full md:w-full flex items-start md:w-full px-3">
                             <div class="flex items-start w-1/2 text-gray-700 px-2 mr-auto">
                
                             </div>
                             <div class="-mr-1">
                                <input type='submit' class="bg-white text-gray-700 font-medium py-1 px-4 border border-gray-400 rounded-lg tracking-wide mr-1 hover:bg-gray-100" value='Добавить запись'>
                             </div>
                          </div>
                          
                       </form>
                    </div>
                 </div>
        </div>
      </li>
    
      <li class="">
        <input class="peer sr-only" type="radio" value="no" name="answer" id="no" />
        <label id="comment_title" class="flex justify-center cursor-pointer rounded-full border border-gray-300 bg-white py-2 px-4 hover:bg-gray-50 focus:outline-none peer-checked:border-transparent peer-checked:ring-2 peer-checked:ring-indigo-500 transition-all duration-500 ease-in-out" for="no">Комментарий</label>
    
            <div class="absolute  left-0 p-6 mt-2 rounded-lg w-[97vw] mx-auto transition-all duration-500 ease-in-out translate-x-40 opacity-0 invisible peer-checked:opacity-100 peer-checked:visible peer-checked:translate-x-1">
                <div class="flex mx-auto items-center justify-center shadow-lg mx-8 mb-4 max-w-lg">
                    <form method="POST" class="w-full max-w-xl bg-white rounded-lg px-4 pt-2">
                       <div class="flex flex-wrap -mx-3 mb-6">
                          <h2 class="px-4 pt-3 pb-2 text-gray-800 text-lg">Кликни на пост, чтобы добавьть комментарий к нему</h2>
                          <div class="w-full md:w-full px-3 mb-2 mt-2">
                             <textarea class="bg-gray-100 rounded border border-gray-400 leading-normal resize-none w-full h-20 py-2 px-3 font-medium placeholder-gray-700 focus:outline-none focus:bg-white" name="comment" id="comment" placeholder='Ваш комментарий...' required></textarea>
                          </div>
                          <div class="w-full md:w-full flex items-start md:w-full px-3">
                             <div class="flex items-start w-1/2 text-gray-700 px-2 mr-auto">
                
                             </div>
                             <div class="-mr-1">
                                <input type='submit' class="bg-white text-gray-700 font-medium py-1 px-4 border border-gray-400 rounded-lg tracking-wide mr-1 hover:bg-gray-100" value='Добавить комментарий'>
                             </div>
                          </div>
                          <input name="note_id" id="note_id" class="invisible  bg-white text-gray-700 font-medium py-1 px-4 border border-gray-400 rounded-lg"></input>
                       </form>
                    </div>
                 </div>
        </div>
      </li>

    </ul>
</div>

{% endif %}
<script type="text/javascript">

    function goDoSomething(d){
        document.getElementById("note_id").value= new Number(d.getAttribute("data-id"));
        document.getElementById("comment_title").click()

    }

</script>
{% endblock %}

  

